name: 3. Update Latest Episodes (Fast AJAX Method)

on:
schedule:
- cron: '*/30 * * * *' # Jalankan setiap 30 menit
workflow_dispatch:

jobs:
scrape:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v3
- uses: actions/setup-python@v4
with:
python-version: '3.10'
- run: pip install -r requirements.txt
- name: Run latest scraper script
timeout-minutes: 5
run: python 3_update_latest.py
- name: Commit and push changes
run: |
git config --global user.name 'github-actions[bot]'
git config --global user.email 'github-actions[bot]@users.noreply.github.com'
git add anime_homepage.json
git diff --staged --quiet || (git commit -m "Update homepage data" && git push)